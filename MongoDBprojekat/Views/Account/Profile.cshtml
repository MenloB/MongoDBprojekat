
@{
    //patrick-tomasso-399557
    ViewBag.Title = "Profile";
    Layout = "~/Views/Shared/_LayoutDarkNav.cshtml";
}
<div class="container">
    <div class="row flex-column" style="margin-top: 100px;">
        <h3>@Model.FirstName @Model.LastName <i class="text-muted">(@Model.Username)</i></h3>
        <form method="post" action="/Upload/UploadFile" class="form-group" enctype="multipart/form-data">
            <input type="file" class="form-control-file" name="file" />
            <input type="submit" class="btn btn-info" value="Upload" />
        </form>
        <p class="text-muted">Profile ID: @Model.Id.ToString()</p>

        <h5>Uploads</h5>
        <table class="table table-hover">
            <thead>
                <tr>
                    <th scope="col">Download</th>
                    <th scope="col">ID</th>
                    <th scope="col">Name</th>
                    <th scope="col"></th>
                    <th scope="col">Url</th>
                    <th scope="col">Delete</th>
                </tr>
            </thead>
            <tbody>
                @{ var i = 0;}
                @foreach (var obj in @Model.Uploads)
                {
                    var url = "http://localhost:" + Request.ServerVariables["SERVER_PORT"].ToString() + "/UploadedFiles/" + Request.Cookies[0]["username"] + "/" + obj.Url;
                    <tr class="table-light" onclick="copyLink('row-@i');">
                        <td class="text-center"><a class="" target="_blank" href="@url"><i class="fa fa-2x fa-cloud-download-alt"></i></a></td>
                        <td class="text-center">@obj.Id</td>
                        <td class="text-center">@obj.Name</td>
                        <td><input readonly type="text" id="row-@i" value="@url" /></td>
                        <td class="text-center url-value" style="font-size: 12px;">@url</td>
                        <td><a href="/Upload/Remove?_id=@obj.Id&userId=@Model.Id"><i class="fas fa-trash"></i></a></td>
                    </tr>

                    i++;
                }
            </tbody>
        </table>
    </div>
</div>